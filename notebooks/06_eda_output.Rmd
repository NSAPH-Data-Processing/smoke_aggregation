
```{r, warning=FALSE, message=FALSE}
library(tidyverse)
library(magrittr)
library(lubridate)
library(sf)
library(raster)
library(viridis)
```

## Join smoke values to shape

```{r}
## Load zip sf object
zip_sf = read_rds("../data/intermediate/scratch/zip_sf.rds") 

# Load zip smoke data frame
zip_smoke_df = read_rds("../data/output/zip_smoke_df.rds")

head(zip_smoke_df)
```

```{r}
# Join shapes with smoke values
zip_sf %<>% 
  left_join(zip_smoke_df)

sum(!zip_sf$ZIP %in% zip_smoke_df$ZIP)
sum(is.na(zip_sf$smoke))
```

```{r}
zip_sf %>% 
  #st_as_sf() %>% 
  st_simplify() %>% 
  ggplot() + 
  geom_sf(aes(fill = smoke), lwd = 0.1) + 
  scale_fill_viridis()
```
